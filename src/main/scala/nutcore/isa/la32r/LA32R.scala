package nutcore

import chisel3._
import chisel3.util._

object LA32R_ALUInstr extends HasLa32rInstrType with HasNutCoreParameter {
  def ADDW    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0_?????_?????_?????")
  def SUBW    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0_?????_?????_?????")
  def SLT     = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0_?????_?????_?????")
  def SLTU    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 1_?????_?????_?????")
  def NOR     = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0_?????_?????_?????")
  def AND     = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 1_?????_?????_?????")
  def OR      = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 0_?????_?????_?????")
  def XOR     = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 1_?????_?????_?????")
  def SLLW    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 1 1 0_?????_?????_?????")
  def SRLW    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 0 1 1 1 1_?????_?????_?????")
  def SRAW    = BitPat("B0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0_?????_?????_?????")
  def SLLIW   = BitPat("b0 0 0 0 0 0 0 0 0 1 0 0 0 0_001_?????_?????_?????")
  def SRLIW   = BitPat("b0 0 0 0 0 0 0 0 0 1 0 0 0 1_001_?????_?????_?????")
  def SRAIW   = BitPat("b0 0 0 0 0 0 0 0 0 1 0 0 1 0_001_?????_?????_?????")
  def SLTI    = BitPat("b0 0 0 0 0 0 1 0 0 0_????????????_?????_?????")
  def SLTUI   = BitPat("b0 0 0 0 0 0 1 0 0 1_????????????_?????_?????")
  def ADDIW   = BitPat("b0 0 0 0 0 0 1 0 1 0_????????????_?????_?????")
  def ANDI    = BitPat("b0 0 0 0 0 0 1 1 0 1_????????????_?????_?????")
  def ORI     = BitPat("b0 0 0 0 0 0 1 1 1 0_????????????_?????_?????")
  def XORI    = BitPat("b0 0 0 0 0 0 1 1 1 1_????????????_?????_?????")
  def LU12IW  = BitPat("b0 0 0 1 0 1 0_????????????????????_?????")
  def PCADDU12I = BitPat("b0 0 0 1 1 1 0_????????????????????_?????")

  val table = Array( // (instrType, FuType, FuOpType, isrfWen)
    ADDW        -> List(Instr3R, FuType.alu, La32rALUOpType.addw, true.B),
    SUBW        -> List(Instr3R, FuType.alu, La32rALUOpType.subw, true.B),
    ADDIW       -> List(Instr2RI12, FuType.alu, La32rALUOpType.addiw, true.B),
  )

}

object LA32R_MDUInstr extends HasLa32rInstrType with HasNutCoreParameter {
  def MULW    = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0_?????_?????_?????")
  def MULHW   = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 1_?????_?????_?????")
  def MULHWU  = BitPat("b0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1 0_?????_?????_?????")
  def DIVW    = BitPat("b0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0_?????_?????_?????")
  def MODW    = BitPat("b0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1_?????_?????_?????")
  def DIVWU   = BitPat("b0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0_?????_?????_?????")
  def MODWU   = BitPat("b0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 1_?????_?????_?????")
}

object LA32R_BRUInstr extends HasLa32rInstrType with HasNutCoreParameter {
  def JIRL  = BitPat("b0 1 0 0 1 1_????????????????_?????_?????")
  def B     = BitPat("b0 1 0 1 0 0_????????????????_??????????")
  def BL    = BitPat("b0 1 0 1 0 1_????????????????_??????????")
  def BEQ   = BitPat("b0 1 0 1 1 0_????????????????_?????_?????")
  def BNE   = BitPat("b0 1 0 1 1 1_????????????????_?????_?????")
  def BLT   = BitPat("b0 1 1 0 0 0_????????????????_?????_?????")
  def BGE   = BitPat("b0 1 1 0 0 1_????????????????_?????_?????")
  def BLTU  = BitPat("b0 1 1 0 1 0_????????????????_?????_?????")
  def BGEU  = BitPat("0 1 1 0 1 1_????????????????_?????_?????")
}

object LA32R_LSUInstr extends HasLa32rInstrType with HasNutCoreParameter {
  def LLW   = BitPat("b0 0 1 0 0 0 0 0_??????????????_?????_?????")
  def SCW   = BitPat("b0 0 1 0 0 0 0 1_??????????????_?????_?????")
  def LDB   = BitPat("b0 0 1 0 1 0 0 0 0 0_????????????_?????_?????")
  def LDH   = BitPat("b0 0 1 0 1 0 0 0 0 1_????????????_?????_?????")
  def LDW   = BitPat("b0 0 1 0 1 0 0 0 1 0_????????????_?????_?????")
  def STB   = BitPat("b0 0 1 0 1 0 0 1 0 0_????????????_?????_?????")
  def STH   = BitPat("b0 0 1 0 1 0 0 1 0 1_????????????_?????_?????")
  def STW   = BitPat("b0 0 1 0 1 0 0 1 1 0_????????????_?????_?????")
  def LDBU  = BitPat("b0 0 1 0 1 0 1 0 0 0_????????????_?????_?????")
  def LDHU  = BitPat("b0 0 1 0 1 0 1 0 0 1_????????????_?????_?????")
}

object LA32R_PRIVInstr extends HasLa32rInstrType with HasNutCoreParameter {

}

object LA32R_MISCInstr extends HasLa32rInstrType with HasNutCoreParameter {
  def BREAK     = BitPat("b0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 0 0_???????????????")
  def SYSCALL   = BitPat("0 0 0 0 0 0 0 0 0 0 1 0 1 0 1 1 0_???????????????")
  def CSR       = BitPat("b0 0 0 0 0 1 0 0_??????????????_?????_?????") // need distinguish CSRRD,CSRWR,CSRXCHG by (9,5)
  def CACOP     = BitPat("b0 0 0 0 0 1 1 0 0 0_????????????_?????_?????")
  def TLBSRCH   = BitPat("b_0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 0 1 0 1 0_0 0 0 0 0_0 0 0 0 0")
  def TLBRD     = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 0 1 0 1 1_0 0 0 0 0_0 0 0 0 0")
  def TLBWR     = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 0 1 1 0 0_0 0 0 0 0_0 0 0 0 0")
  def TLBFILL   = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 0 1 1 0 1_0 0 0 0 0_0 0 0 0 0")
  def ERTN      = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 0 1 1 1 0_0 0 0 0 0_0 0 0 0 0")
  def IDLE      = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 1_???????????????")
  def INVTLB    = BitPat("b0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 1 1_?????_?????_?????")
  def PRELD     = BitPat("b0 0 1 0 1 0 1 0 1 1_????????????_?????_?????")
  def DBAR      = BitPat("b0 0 1 1 1 0 0 0 0 1 1 1 0 0 1 0 0_???????????????")
  def IBAR      = BitPat("b0 0 1 1 1 0 0 0 0 1 1 1 0 0 1 0 1_???????????????")
}